<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Turtle Race on GitHub Pages</title>
    <link rel="stylesheet" href="https://pss
    https://pyscript.net/latest/pyscript.js</script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #f0f8ff;
        }
        canvas {
            border: 2px solid #333;
            background: #fff;
            display: block;
            margin: 20px auto;
        }
        #controls {
            margin: 20px;
        }
    </style>
</head>
<body>
    <h1>Turtle Race Game</h1>
    <div id="controls">
        <label for="bet">Enter your bet (red, orange, yellow, green, blue, purple): </label>
        <input type="text" id="bet" />
        <button id="startRace">Start Race</button>
    </div>
    <canvas id="raceCanvas" width="500" height="400"></canvas>

    <py-script>
from js import document
import asyncio, random

canvas = document.getElementById("raceCanvas")
ctx = canvas.getContext("2d")

colors = ["red", "orange", "yellow", "green", "blue", "purple"]
y_positions = [50, 100, 150, 200, 250, 300]
x_positions = [-230] * 6
finish_line = 450

def draw_turtles():
    ctx.clearRect(0, 0, canvas.width, canvas.height)
    ctx.beginPath()
    ctx.moveTo(finish_line, 0)
    ctx.lineTo(finish_line, canvas.height)
    ctx.strokeStyle = "black"
    ctx.stroke()
    for i, color in enumerate(colors):
        ctx.beginPath()
        ctx.arc(x_positions[i]+250, y_positions[i], 20, 0, 3.14*2)
        ctx.fillStyle = color
        ctx.fill()

async def start_race():
    user_bet = document.getElementById("bet").value.strip().lower()
    race_on = True
    while race_on:
        await asyncio.sleep(0.05)
        for i in range(6):
            x_positions[i] += random.randint(0, 10)
            if x_positions[i]+250 >= finish_line:
                race_on = False
                winner = colors[i]
                result = f"You {'won' if winner == user_bet else 'lost'}! The {winner} turtle is the winner!"
                document.body.insertAdjacentHTML("beforeend", f"<h2>{result}</h2>")
                break
        draw_turtles()

draw_turtles()
start_button = document.getElementById("startRace")
start_button.addEventListener("click", lambda e: asyncio.ensure_future(start_race()))
    </py-script>
</body>
</html>
